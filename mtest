#!/usr/bin/env php
<?php
//
// Get currently used design.
// It's possible to use multiple designs, but we're most interested in the template theme.
//
// @author      Joseph Mastey <joseph.mastey@gmail.com>
// @author      $Author$
// @version     $Id$
// @copyright   Copyright (c) JRM Ventures LLC, 2010-

require_once("lib/base.php");
require_once("lib/db.php");
init_magento();


if (!Mage::helper('enterprise_reward')->isEnabled()) {
    return;
}

$customer   = Mage::getModel("customer/customer")->load(773);
$data       = array(
    'store_id'      => Mage::app()->getDefaultStoreView()->getWebsiteId(),
);

$reward = Mage::getModel('enterprise_reward/reward')
    ->setCustomer($customer)
    ->setWebsiteId(Mage::app()->getStore($data['store_id'])->getWebsiteId())
    ->loadByCustomer();

$reward->addData($data)
    ->setAction(Enterprise_Reward_Model_Reward::REWARD_ACTION_INVITATION_ORDER)
    ->setActionEntity($customer)
    ->updateRewardPoints();
